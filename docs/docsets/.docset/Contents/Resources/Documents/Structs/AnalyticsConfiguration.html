<!DOCTYPE html>
<html lang="en">
  <head>
    <title>AnalyticsConfiguration Structure Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset="utf-8">
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    
    <script src="../js/lunr.min.js" defer></script>
    <script src="../js/typeahead.jquery.js" defer></script>
    <script src="../js/jazzy.search.js" defer></script>
  </head>
  <body>

    <a name="//apple_ref/swift/Struct/AnalyticsConfiguration" class="dashAnchor"></a>

    <a title="AnalyticsConfiguration Structure Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="../index.html">
           Docs
        </a>
         (28% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="../search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="../index.html"> Reference</a>
      <img class="carat" src="../img/carat.png" />
      AnalyticsConfiguration Structure Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Guides.html">Guides</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../readme.html">README</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/AnalyticsService.html">AnalyticsService</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/AnalyticsService/VaporEnvironment.html">– VaporEnvironment</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/CoreDataManager.html">CoreDataManager</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/LocalAppSession.html">LocalAppSession</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/LocalEvent.html">LocalEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/TokenBucket.html">TokenBucket</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/VaporNetworkService.html">VaporNetworkService</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/AnalyticEventType.html">AnalyticEventType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/AnalyticEventTypeProtocol.html">AnalyticEventTypeProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/VaporModel.html">VaporModel</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/AnalyticsConfiguration.html">AnalyticsConfiguration</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/AnalyticsConfiguration/Environment.html">– Environment</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/AppInfoModel.html">AppInfoModel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/DayMeasurements.html">DayMeasurements</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/DevEventsView.html">DevEventsView</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/DevEventsView_Previews.html">DevEventsView_Previews</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/DevLocalEventDetailView.html">DevLocalEventDetailView</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/DevLocalSessionDetailView.html">DevLocalSessionDetailView</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/DevNetworkEventsView.html">DevNetworkEventsView</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/DevNetworkEventsView_Previews.html">DevNetworkEventsView_Previews</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/DevSessionsView.html">DevSessionsView</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/DevSessionsView_Previews.html">DevSessionsView_Previews</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/GlobalDeviceInfoModel.html">GlobalDeviceInfoModel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/LocalDeviceInfoModel.html">LocalDeviceInfoModel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/Location.html">Location</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/Location/CodingKeys.html">– CodingKeys</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/VaporAnalyticEventModel.html">VaporAnalyticEventModel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/VaporAnalyticEventModel/CodingKeys.html">– CodingKeys</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/VaporAnalyticSessionModel.html">VaporAnalyticSessionModel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/VaporAnalyticSessionModel/CodingKeys.html">– CodingKeys</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/VaporAppInfoModel.html">VaporAppInfoModel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/VaporAppInfoModel/CodingKeys.html">– CodingKeys</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/VaporDeviceModel.html">VaporDeviceModel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/VaporDeviceModel/CodingKeys.html">– CodingKeys</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/VaporUserModel.html">VaporUserModel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/VaporUserModel/CodingKeys.html">– CodingKeys</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/WeatherInfo.html">WeatherInfo</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Typealiases.html#/s:12AppAnalytics18TemperatureCelsiusa">TemperatureCelsius</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Typealiases.html#/s:12AppAnalytics21TemperatureFahrenheita">TemperatureFahrenheit</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Typealiases.html#/s:12AppAnalytics7VaporIDa">VaporID</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            <h1>AnalyticsConfiguration</h1>
              <div class="declaration">
                <div class="language">
                  <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">AnalyticsConfiguration</span></code></pre>

                </div>
              </div>
            <p>Analytics service configuration</p>
<h2 id='notes-on-tokenbucket-and-event-dispatch-to-the-network' class='heading'>Notes on TokenBucket and event dispatch to the network:</h2>

<p><strong>reccomended configuration</strong> :</p>

<ul>
<li>tokeBucketRefreshIntervalInSeconds = 1 second</li>
<li>tokenBucketTokensPerInterval = 5</li>
<li>tokenBucketCapacity = 30</li>
<li>tokenBucketInitialTokenCount = 2</li>
</ul>

<p>Analytics Services utilizes a TokenBucket (simple algorithm used for rate-limiting events and shaping network traffic)</p>

<p>The benefit of using a TokenBucket is that it does not require any system level timers to manage the dispatching of events to the network. When the system wants to send an event it first checks the TokenBucket to see if it has enough tokens to to do this. If not then then the event must wait for the TokenBucket to be refreshed the token refresh is determined by the <code>tokensPerInterval</code> and the <code>tokeBucketRefreshIntervalInSeconds</code>. the tokenBucket is checked for potential refresh every time the system requests a <code>tokenCount</code> which occurs every time a <code>dispatchAnalyticEvent</code> occurs. There is an additional flush request that happens at startup.</p>

<p>Every <code>dispatchAnalyticEvent</code> will trigger a <code>flush</code> request that will request events oldest first and dispatch them to the network as the accumulated tokens permit, in this way events are dispatched FIFO style and will not overwhelm the network with a large body of network requests.</p>

<p>References:</p>

<ul>
<li><a href="https://en.wikipedia.org/wiki/Token_bucket">https://en.wikipedia.org/wiki/Token_bucket</a></li>
</ul>

          </div>
        </section>

        <section class="section">
          <div class="section-content">
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:12AppAnalytics0B13ConfigurationV11EnvironmentO"></a>
                    <a name="//apple_ref/swift/Enum/Environment" class="dashAnchor"></a>
                    <a class="token" href="#/s:12AppAnalytics0B13ConfigurationV11EnvironmentO">Environment</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Undocumented</p>

                        <a href="../Structs/AnalyticsConfiguration/Environment.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="kt">Environment</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:12AppAnalytics0B13ConfigurationV11environmentAC11EnvironmentOvp"></a>
                    <a name="//apple_ref/swift/Property/environment" class="dashAnchor"></a>
                    <a class="token" href="#/s:12AppAnalytics0B13ConfigurationV11environmentAC11EnvironmentOvp">environment</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Undocumented</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="k">let</span> <span class="nv">environment</span><span class="p">:</span> <span class="kt"><a href="../Structs/AnalyticsConfiguration/Environment.html">Environment</a></span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:12AppAnalytics0B13ConfigurationV34tokeBucketRefreshIntervalInSecondsSdvp"></a>
                    <a name="//apple_ref/swift/Property/tokeBucketRefreshIntervalInSeconds" class="dashAnchor"></a>
                    <a class="token" href="#/s:12AppAnalytics0B13ConfigurationV34tokeBucketRefreshIntervalInSecondsSdvp">tokeBucketRefreshIntervalInSeconds</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Undocumented</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="k">let</span> <span class="nv">tokeBucketRefreshIntervalInSeconds</span><span class="p">:</span> <span class="kt">TimeInterval</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:12AppAnalytics0B13ConfigurationV28tokenBucketTokensPerIntervalSivp"></a>
                    <a name="//apple_ref/swift/Property/tokenBucketTokensPerInterval" class="dashAnchor"></a>
                    <a class="token" href="#/s:12AppAnalytics0B13ConfigurationV28tokenBucketTokensPerIntervalSivp">tokenBucketTokensPerInterval</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Undocumented</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="k">let</span> <span class="nv">tokenBucketTokensPerInterval</span><span class="p">:</span> <span class="kt">Int</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:12AppAnalytics0B13ConfigurationV19tokenBucketCapacitySivp"></a>
                    <a name="//apple_ref/swift/Property/tokenBucketCapacity" class="dashAnchor"></a>
                    <a class="token" href="#/s:12AppAnalytics0B13ConfigurationV19tokenBucketCapacitySivp">tokenBucketCapacity</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Undocumented</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="k">let</span> <span class="nv">tokenBucketCapacity</span><span class="p">:</span> <span class="kt">Int</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:12AppAnalytics0B13ConfigurationV28tokenBucketInitialTokenCountSivp"></a>
                    <a name="//apple_ref/swift/Property/tokenBucketInitialTokenCount" class="dashAnchor"></a>
                    <a class="token" href="#/s:12AppAnalytics0B13ConfigurationV28tokenBucketInitialTokenCountSivp">tokenBucketInitialTokenCount</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Undocumented</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="k">let</span> <span class="nv">tokenBucketInitialTokenCount</span><span class="p">:</span> <span class="kt">Int</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:12AppAnalytics0B13ConfigurationV012defaultLocalC0ACvpZ"></a>
                    <a name="//apple_ref/swift/Variable/defaultLocalConfiguration" class="dashAnchor"></a>
                    <a class="token" href="#/s:12AppAnalytics0B13ConfigurationV012defaultLocalC0ACvpZ">defaultLocalConfiguration</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Undocumented</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">static</span> <span class="k">var</span> <span class="nv">defaultLocalConfiguration</span><span class="p">:</span> <span class="kt">AnalyticsConfiguration</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </section>

      </article>
    </div>
    <section class="footer">
      <p>&copy; 2019 <a class="link" href="" target="_blank" rel="external"></a>. All rights reserved. (Last updated: 2019-12-12)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.0</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
